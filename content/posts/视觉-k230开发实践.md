+++
date = '2025-11-11T21:57:27+08:00'
draft = false
title = '视觉_K230开发实践'
+++

*记录学习k230的过程*
## 25.11.11 准备工作、学习摄像模块
### 准备工作
1. 固件烧录
2. 例程复现
3. 找到了ocr（文字识别）现成例程 <br>
小声：**结合多平台教程文档，如01studio或嘉楠等等，这个没有的例程，另一个说不定有呢**

### 摄像模块
1. k230摄像头架构
- 板子最多搭载三个摄像头
- 每个摄像头可以接入三个不同的处理模块（对输入图像进行加工处理）
- 每个模块（camera_device）有三个输出通道，可以多输出并行


2. 摄像头模块编程
- sensor基础语法

    - **创建处理模块** 
    > 
        from media.sensor import *
        sensor = Sensor(id ,width ,height ,fps) # 实例化，对应架构中的处理模块

    > 1. id：摄像头id，默认为2<br>
    > 2. width ,height ,fps:**最大**输出图像参数


    - **设置图像输出大小和位置**<br>
    >
        sensor.reset() # 初始化sensor对象及传感器

        sensor.set_framesize(chn=CAM_CHN_ID_0, width=640, height=480)
        sensor.set_framesize(chn=CAM_CHN_ID_3, framesize = Sensor.VGA)


    > 1. framesize参数对应width、height，表示输出图像分辨率，二者作用相同。<br>
    > 2. framesize = Sensor.VGA即表示640*480分辨率，除此之外，还有Sensor.HD等表示分辨率的代号，这些代号统称为图像帧尺寸<br>
    > 3. chn:channel_number,表示输出通道，即架构中每个模块的三个输出通道



    - **设置图像怎么输出、输出位置**<br>
    > 
        sensor.set_pixformat(pix_format, chn=CAM_CHN_ID_0)
    
    > 1. pix_format:输出图像的像素格式，即每个像素在计算机中如何存储，也就是RGB三个通道数据用多少位存储。<br>
    > 常用有：<br>
    RGB565：R for 5 bits ; G for 6 bits ; B for 5 bits <br>
    RGB888: R G B for 8 bits respectively <br>


    - **水平与竖直反转**
    >
        sensor.set_hmirror(True) # 水平
        sensor.set_vflip(False) # 竖直

    
    - **启动、关闭摄像头**
    >
        sensor.run()
        sensor.stop()
    
    > 多个摄像头只用启动一次，但要分别关闭


    - **指定通道截一帧图片**
    > 
        sensor.snapshot(chn=CAM_CHN_ID_0)
    > 默认为0设备0通道
        


---

## 25.11.13 GPIO
### GPIO
- **原理明确**
    - 硬件之间的通信必须经过通信协议，常用的通信协议有IIC\SPI\UART\CAN\HTTP等等
    - 这些“通信协议”是一种规则，在**硬件**上的体现为**实现信息收发的逻辑电路**，可以作为模块嵌入到MPU芯片里。
    > 当然，不是所有的协议都软硬兼修，HTTP协议就是**纯软件协议**

- **名词解释**
> 1. P-mos N-mos：三极管，作用相当于受电压控制的开关，它俩区别是，P为低于阈值导通，N为超出阈值导通
> 2. 串口：特指UART协议的硬件电路部分，信息流向：MPU ——> 引脚 ——> 串口（片内外设的一种） ——> 外接设备（片外外设） （一个串口可能会用到许多引脚）
> 3. 外设：片内外设：通信协议的硬件逻辑电路模块，集成在芯片内部；片外外设：与芯片连接的模块，在芯片外面
> 
>

- **GPIO干嘛用的？**<br>
**四大功能：输入、输出、模拟、复用**
    - **输入**
    1. 片内外设向**MPU**输入
    2. 分类
        - 下拉输入：无外部输入信号时，MPU读到低电平，只有外部输入为高电平时，MPU才能读到高电平
        - 上拉输入：无外部输入信号时，MPU读到高电平，与上面同理
        - 悬空输入：引脚的电平状态完全由外部输入决定
        - 模拟输入：能接受模拟信号，通过ADC（模数转换器）转为数字信号，传递给MPU

    - **输出**
    1. MPU向**片内外设**输出   
    2. 分类
        - 推挽输出：P-mos、N-mos均工作（不同时工作），可以主动输出高、低电平
        - 开漏输出：只有N-mos工作，只能主动输出低电平，输出高电平要靠上拉电阻拉上去

    - **复用**
    1. 此时GPIO像一个**容器**，可以对应连接到MPU内部的IIC、SPI、UART等硬件模块，本质上是把事态、奇偶校验、等等一系列的流程集成到一个硬件模块上，随后该引脚与外设通过对应的协议通信。
    2. 一个GPIO不能同时连接多个协议模块，故要通过编程选择。
    
    - **模拟**
    1. 通过输入、输出模式配置、电平高低变化模拟通信协议，即把硬件外设的功能通过软件模拟了一遍


     



- **总结**
> 1. GPIO四大功能：输入、输出、模拟、复用
> 2. GPIO可编程，体现为其模拟功能。


## 25.11.15.
-[x] GPIO各功能代码示例